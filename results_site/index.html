<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Audio Watermarking Results</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Neural Audio Watermarking Results</h1>
            <p>Overview of experiment runs, metrics, and visualizations.</p>
        </header>

        <div class="filters-container">
            <div class="filter-group">
                <label for="search-text">Search</label>
                <input type="text" id="search-text" placeholder="Run name, ID..." oninput="applyFilters()">
            </div>
            <div class="filter-group">
                <label for="filter-channel">Channel</label>
                <select id="filter-channel" onchange="applyFilters()">
                    <option value="all">All</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filter-bits">Bits</label>
                <select id="filter-bits" onchange="applyFilters()">
                    <option value="all">All</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filter-eps">Epsilon</label>
                <select id="filter-eps" onchange="applyFilters()">
                    <option value="all">All</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filter-alpha">Alpha (L2)</label>
                <select id="filter-alpha" onchange="applyFilters()">
                    <option value="all">All</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filter-beta">Beta (LSD)</label>
                <select id="filter-beta" onchange="applyFilters()">
                    <option value="all">All</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filter-declr">Dec LR</label>
                <select id="filter-declr" onchange="applyFilters()">
                    <option value="all">All</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filter-decsteps">Dec Steps</label>
                <select id="filter-decsteps" onchange="applyFilters()">
                    <option value="all">All</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filter-epochs">Epochs</label>
                <select id="filter-epochs" onchange="applyFilters()">
                    <option value="all">All</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filter-eval">Eval Stats</label>
                <select id="filter-eval" onchange="applyFilters()">
                    <option value="all">All</option>
                    <option value="yes">Available</option>
                    <option value="no">Missing</option>
                </select>
            </div>
            <div class="filter-actions">
                <button class="btn-secondary" onclick="resetFilters()">Reset</button>
                <button class="btn-primary" onclick="exportCSV()">Export CSV</button>
            </div>
        </div>

        <!-- Plotting Section -->
        <div class="plotting-container">
            <div class="plotting-controls">
                <h3>Compare Metrics</h3>
                <div class="plotting-input">
                    <label for="metric-select">Select Attack:</label>
                    <select id="metric-select">
                        <option value="">-- Select an Attack --</option>
                    </select>
                    
                    <label for="xaxis-select">X-Axis:</label>
                    <select id="xaxis-select">
                        <option value="">Date-Time</option>
                        <option value="bits">Bits</option>
                        <option value="eps">Epsilon</option>
                        <option value="alpha">Alpha</option>
                        <option value="beta">Beta</option>
                        <option value="mask_reg">Mask Reg</option>
                        <option value="logit_reg">Logit Reg</option>
                        <option value="decoder_lr">Dec LR</option>
                        <option value="decoder_steps">Dec Steps</option>
                        <option value="Epochs">Epochs</option>
                    </select>

                    <button class="btn-primary" onclick="generateChart()">Create Plot</button>
                    <button class="btn-secondary" onclick="hideChart()" id="hide-chart-btn" style="display:none;">Hide Plot</button>
                </div>
            </div>
            <div class="chart-wrapper" style="display:none; position: relative; height:400px; width:100%">
                <canvas id="comparisonChart"></canvas>
            </div>
        </div>

        <div class="table-container">
            <table id="results-table">
                <thead>
                    <tr>
                        <th data-sort="Date" onclick="handleSort('Date')">Date/Time <span class="sort-icon"></span></th>
                        <th data-sort="bits" onclick="handleSort('bits')">Bits <span class="sort-icon"></span></th>
                        <th data-sort="eps" onclick="handleSort('eps')">Epsilon <span class="sort-icon"></span></th>
                        <th data-sort="alpha" onclick="handleSort('alpha')">Alpha (L2) <span class="sort-icon"></span></th>
                        <th data-sort="beta" onclick="handleSort('beta')">Beta (LSD) <span class="sort-icon"></span></th>
                        <th data-sort="mask_reg" onclick="handleSort('mask_reg')">Mask Reg <span class="sort-icon"></span></th>
                        <th data-sort="logit_reg" onclick="handleSort('logit_reg')">Logit Reg <span class="sort-icon"></span></th>
                        <th data-sort="decoder_lr" onclick="handleSort('decoder_lr')">Dec LR <span class="sort-icon"></span></th>
                        <th data-sort="decoder_steps" onclick="handleSort('decoder_steps')">Dec Steps <span class="sort-icon"></span></th>
                        <th data-sort="channel" onclick="handleSort('channel')">Channel <span class="sort-icon"></span></th>
                        <th data-sort="Epochs" onclick="handleSort('Epochs')">Epochs <span class="sort-icon"></span></th>
                        <th>Checkpoints</th>
                        <th>Eval Metrics (BER / SNR / LSD)</th>
                        <th>Plot</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- Data will be inserted here -->
                </tbody>
            </table>
        </div>
        <div id="row-count" style="margin-top: 10px; color: #666; font-size: 14px;"></div>
    </div>

    <script src="data.js"></script>
    <script src="js/script.js"></script>
</body>
</html>
